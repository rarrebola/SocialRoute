-- Generado por Oracle SQL Developer Data Modeler 3.3.0.747
--   en:        2016-07-01 12:04:17 CEST
--   sitio:      Oracle Database 11g
--   tipo:      Oracle Database 11g




CREATE TABLE CIUDAD
  (
    NOMBRE_CIUDAD VARCHAR2 (100) NOT NULL ,
    MAPA BLOB ,
    NOMBRE_REGION VARCHAR2 (50) NOT NULL ,
    NICKNAME      VARCHAR2 (50) NOT NULL ,
    CODIGO_PAIS   VARCHAR2 (2) NOT NULL
  ) ;
CREATE UNIQUE INDEX CIUDAD__IDX ON CIUDAD
  (
    NOMBRE_REGION ASC , CODIGO_PAIS ASC , NOMBRE_CIUDAD ASC
  )
  ;
CREATE UNIQUE INDEX CIUDAD__IDXv1 ON CIUDAD
  (
    NICKNAME ASC
  )
  ;
  ALTER TABLE CIUDAD ADD CONSTRAINT CIUDAD_PK PRIMARY KEY
  (
    NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION
  )
  ;

CREATE TABLE COMENTARIO
  (
    ID_COMENTARIO NUMBER NOT NULL ,
    COMENTARIO    VARCHAR2 (500) NOT NULL ,
    NICKNAME      VARCHAR2 (50) ,
    ID_RUTA       NUMBER
  ) ;
ALTER TABLE COMENTARIO ADD CONSTRAINT COMENTARIO_PK PRIMARY KEY
(
  ID_COMENTARIO
)
;

CREATE TABLE FORMADA_POR
  (
    LUGAR_DE_INTERES_NOMBRE_LI     VARCHAR2 (100) NOT NULL ,
    LUGAR_DE_INTERES_NOMBRE_CIUDAD VARCHAR2 (100) NOT NULL ,
    LUGAR_DE_INTERES_CODIGO_PAIS   VARCHAR2 (2) NOT NULL ,
    LUGAR_DE_INTERES_NOMBRE_REGION VARCHAR2 (50) NOT NULL ,
    RUTA_ID_RUTA                   NUMBER NOT NULL
  ) ;
ALTER TABLE FORMADA_POR ADD CONSTRAINT FORMADA_POR__IDX PRIMARY KEY
(
  LUGAR_DE_INTERES_NOMBRE_LI, LUGAR_DE_INTERES_NOMBRE_CIUDAD, LUGAR_DE_INTERES_CODIGO_PAIS, LUGAR_DE_INTERES_NOMBRE_REGION, RUTA_ID_RUTA
)
;

CREATE TABLE LUGAR_DE_INTERES
  (
    NOMBRE_LI   VARCHAR2 (100) NOT NULL ,
    DESCRIPCION VARCHAR2 (250) ,
    FOTO BLOB ,
    NOMBRE_CIUDAD VARCHAR2 (100) NOT NULL ,
    CODIGO_PAIS   VARCHAR2 (2) NOT NULL ,
    NOMBRE_REGION VARCHAR2 (50) NOT NULL
  ) ;
ALTER TABLE LUGAR_DE_INTERES ADD CONSTRAINT LUGAR_DE_INTERES_PK PRIMARY KEY
(
  NOMBRE_LI, NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION
)
;

CREATE TABLE PAIS
  (
    CODIGO_PAIS VARCHAR2 (2) NOT NULL ,
    NOMBRE_PAIS VARCHAR2 (50) NOT NULL ,
    CONTINENTE  VARCHAR2 (50) NOT NULL ,
    BANDERA_PAIS BLOB ,
    NOMBRE_REGION VARCHAR2 (50) NOT NULL ,
    NOMBRE_CIUDAD VARCHAR2 (100) NOT NULL
  ) ;
CREATE UNIQUE INDEX PAIS__IDX ON PAIS
  (
    NOMBRE_REGION ASC , CODIGO_PAIS ASC , NOMBRE_CIUDAD ASC
  )
  ;
  ALTER TABLE PAIS ADD CONSTRAINT PAIS_PK PRIMARY KEY
  (
    CODIGO_PAIS, NOMBRE_REGION, NOMBRE_CIUDAD
  )
  ;

CREATE TABLE REGION
  (
    NOMBRE_REGION VARCHAR2 (50) NOT NULL ,
    BANDERA_REGION BLOB ,
    CODIGO_PAIS   VARCHAR2 (2) NOT NULL ,
    NOMBRE_CIUDAD VARCHAR2 (100) NOT NULL
  ) ;
CREATE UNIQUE INDEX REGION__IDX ON REGION
  (
    NOMBRE_CIUDAD ASC , CODIGO_PAIS ASC , NOMBRE_REGION ASC
  )
  ;
CREATE UNIQUE INDEX REGION__IDXv1 ON REGION
  (
    CODIGO_PAIS ASC , NOMBRE_REGION ASC , NOMBRE_CIUDAD ASC
  )
  ;
  ALTER TABLE REGION ADD CONSTRAINT REGION_PK PRIMARY KEY
  (
    NOMBRE_REGION, CODIGO_PAIS, NOMBRE_CIUDAD
  )
  ;

CREATE TABLE RUTA
  (
    NOMBRE_RUTA VARCHAR2 (100) NOT NULL ,
    DURACION    INTEGER ,
    DESCRIPCION VARCHAR2 (250) ,
    ID_RUTA     NUMBER NOT NULL
  ) ;
ALTER TABLE RUTA ADD CONSTRAINT RUTA_PK PRIMARY KEY
(
  ID_RUTA
)
;

CREATE TABLE USUARIO
  (
    NICKNAME VARCHAR2 (50) NOT NULL ,
    PASSWORD VARCHAR2 (50) NOT NULL ,
    EMAIL    VARCHAR2 (100) ,
    AVATAR BLOB ,
    NOMBRE_CIUDAD VARCHAR2 (100) NOT NULL ,
    CODIGO_PAIS   VARCHAR2 (2) NOT NULL ,
    NOMBRE_REGION VARCHAR2 (50) NOT NULL
  ) ;
CREATE UNIQUE INDEX USUARIO__IDX ON USUARIO
  (
    NOMBRE_CIUDAD ASC , CODIGO_PAIS ASC , NOMBRE_REGION ASC
  )
  ;
  ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_PK PRIMARY KEY
  (
    NICKNAME
  )
  ;

CREATE TABLE USUARIO_RUTAS
  (
    NICKNAME VARCHAR2 (50) NOT NULL ,
    ID_RUTA  NUMBER NOT NULL
  ) ;
ALTER TABLE USUARIO_RUTAS ADD CONSTRAINT USUARIO_RUTAS_PK PRIMARY KEY
(
  ID_RUTA, NICKNAME
)
;

CREATE TABLE VALORACION
  (
    VALORACION    INTEGER NOT NULL ,
    ID_VALORACION NUMBER NOT NULL ,
    NICKNAME      VARCHAR2 (50) ,
    ID_RUTA       NUMBER
  ) ;
ALTER TABLE VALORACION ADD CONSTRAINT VALORACION_PK PRIMARY KEY
(
  ID_VALORACION
)
;

ALTER TABLE CIUDAD ADD CONSTRAINT CIUDAD_REGION_FK FOREIGN KEY ( NOMBRE_REGION, CODIGO_PAIS, NOMBRE_CIUDAD ) REFERENCES REGION ( NOMBRE_REGION, CODIGO_PAIS, NOMBRE_CIUDAD ) ;

ALTER TABLE CIUDAD ADD CONSTRAINT CIUDAD_USUARIO_FK FOREIGN KEY ( NICKNAME ) REFERENCES USUARIO ( NICKNAME ) ;

ALTER TABLE COMENTARIO ADD CONSTRAINT COMENTARIO_RUTA_FK FOREIGN KEY ( ID_RUTA ) REFERENCES RUTA ( ID_RUTA ) ;

ALTER TABLE COMENTARIO ADD CONSTRAINT COMENTARIO_USUARIO_FK FOREIGN KEY ( NICKNAME ) REFERENCES USUARIO ( NICKNAME ) ;

ALTER TABLE FORMADA_POR ADD CONSTRAINT FK_ASS_36 FOREIGN KEY ( LUGAR_DE_INTERES_NOMBRE_LI, LUGAR_DE_INTERES_NOMBRE_CIUDAD, LUGAR_DE_INTERES_CODIGO_PAIS, LUGAR_DE_INTERES_NOMBRE_REGION ) REFERENCES LUGAR_DE_INTERES ( NOMBRE_LI, NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION ) ;

ALTER TABLE FORMADA_POR ADD CONSTRAINT FK_ASS_37 FOREIGN KEY ( RUTA_ID_RUTA ) REFERENCES RUTA ( ID_RUTA ) ;

ALTER TABLE LUGAR_DE_INTERES ADD CONSTRAINT LUGAR_DE_INTERES_CIUDAD_FK FOREIGN KEY ( NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION ) REFERENCES CIUDAD ( NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION ) ;

ALTER TABLE PAIS ADD CONSTRAINT PAIS_REGION_FK FOREIGN KEY ( NOMBRE_REGION, CODIGO_PAIS, NOMBRE_CIUDAD ) REFERENCES REGION ( NOMBRE_REGION, CODIGO_PAIS, NOMBRE_CIUDAD ) ;

ALTER TABLE REGION ADD CONSTRAINT REGION_CIUDAD_FK FOREIGN KEY ( NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION ) REFERENCES CIUDAD ( NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION ) ;

ALTER TABLE REGION ADD CONSTRAINT REGION_PAIS_FK FOREIGN KEY ( CODIGO_PAIS, NOMBRE_REGION, NOMBRE_CIUDAD ) REFERENCES PAIS ( CODIGO_PAIS, NOMBRE_REGION, NOMBRE_CIUDAD ) ;

ALTER TABLE USUARIO ADD CONSTRAINT USUARIO_CIUDAD_FK FOREIGN KEY ( NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION ) REFERENCES CIUDAD ( NOMBRE_CIUDAD, CODIGO_PAIS, NOMBRE_REGION ) ;

ALTER TABLE USUARIO_RUTAS ADD CONSTRAINT USUARIO_RUTAS_RUTA_FK FOREIGN KEY ( ID_RUTA ) REFERENCES RUTA ( ID_RUTA ) ;

ALTER TABLE USUARIO_RUTAS ADD CONSTRAINT USUARIO_RUTAS_USUARIO_FK FOREIGN KEY ( NICKNAME ) REFERENCES USUARIO ( NICKNAME ) ;

ALTER TABLE VALORACION ADD CONSTRAINT VALORACION_RUTA_FK FOREIGN KEY ( ID_RUTA ) REFERENCES RUTA ( ID_RUTA ) ;

ALTER TABLE VALORACION ADD CONSTRAINT VALORACION_USUARIO_FK FOREIGN KEY ( NICKNAME ) REFERENCES USUARIO ( NICKNAME ) ;


-- Informe de Resumen de Oracle SQL Developer Data Modeler: 
-- 
-- CREATE TABLE                            10
-- CREATE INDEX                             6
-- ALTER TABLE                             25
-- CREATE VIEW                              0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
